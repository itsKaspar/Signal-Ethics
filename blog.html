<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Signal Ethics - Blog</title>
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/blog.css">

  <!-- highlighting -->
  <link rel="stylesheet" href="./css/code.css">
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script> -->

  <!-- libraries -->
  <script src="./lib/p5.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> -->

  <script src="./lib/tinycode.js"></script>
</head>

<body>



  <a href="#" class="home-button-link">
  </a>
  <iframe class="home-button" src="./iframes/idx-gradient.html">
  </iframe>


  <div id="blog">
    <div id="blog-head">
      <!-- <div id="nav"><a href="#" id="homeLinkSmall">âŒ‚ root</a> > </div> -->
      <h1 id="blog-title"><span id="blog-filename"></span></h1>
    </div>
    <div id="blog-body"></div>

<script>

  // set link to home
  let home = document.getElementsByClassName('home-button-link')[0]
  home.href = window.location.href.split('blog.html')[0];// + '/website';

  // Get the GET Variable in javascript
  const queryString = window.location.search;
  // console.log(queryString);
  // #### returns '?product=shirt&color=blue&newuser&size=m'
  const urlParams = new URLSearchParams(queryString);
  const path = urlParams.get('path')

  // # READ BLOG POST FROM FILE

  readBlogPost();

  async function readBlogPost(){

    // Get Blog Content
    let response = await fetch(path);
    let text = await response.text();

    // Get Blog Title
    let filename = path.replace(/^.*[\\\/]/, '') // get the filename

    // Get DOM elements
    let blogHead = document.querySelector('#blog-head')
    let blogTitle = document.querySelector('#blog-title')
    let blogBody = document.querySelector('#blog-body')
    let blogFilename = document.querySelector('#blog-filename')

    // Update DOM elements
    blogFilename.innerHTML = filename;
    blogTitle.innerHTML = filename.slice(0, -5);
    blogBody.innerHTML = text;
  }

  </script>

  </div>



</body>
</html>
