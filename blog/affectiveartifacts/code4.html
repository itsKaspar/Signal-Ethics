<!doctype html>

<html>

<head>

  <meta charset="utf-8">

  <link rel="stylesheet" href="/css/p5.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

</head>

  <script>

    // ###### The code
    // ################

    let code =`

c(200,200,100);
if(true){
  c(300,300,100);
}`

    function setup() {
      createCanvas(windowWidth, windowHeight);
      left = createGraphics(windowWidth/2, windowHeight);
      right = createGraphics(windowWidth/2, windowHeight);
      left.rectMode(CENTER);
      right.rectMode(CENTER);
      frameRate(1);
    }

    function draw(){
      clear();
      left.clear();
      right.clear();

      // # Second Side : Code Interepreted
      // #################################

      // 1. # create shortcuts to avoid complicated notation

      let c = right.circle;
      let r = right.rect;
      let w = right.width;
      let h = right.height;

      // 2. # decay

      let codeBuffer = decay(code);

      // 3. # evaluate code

      //if(checkIfValid(codeBuffer)){
        //eval(code);
        //code = codeBuffer;
      //}

      // 4. # aesthetics

      right.rect(100, 100, 100);
      right.stroke('white');
      right.strokeWeight(5);
      right.noFill();
      right.rect(w/2, h/2, w, h);

      // # First Side : Code Text
      // ########################

      left.noStroke();
      left.fill('#ffffff33')
      left.rect(left.width/2, left.height/2, left.width, left.height);
      left.fill('white');
      left.noStroke();
      left.textSize(14);
      left.text(code,50,50);

      // # Draw Both buffers
      // ###################

      image(left, 0, 0);
      image(right, width/2, 0);
    }

    // ##### Function to Decay
    // #######################

    function decay(text){

      let newString = ' ';

      for(let i = 0; i < text.length; i++){
          //newString.concat(text.charAt(i));
          newString.concat('a');
          console.log(newString);
      }

      return newString;
    }


    // ##### Function to check if Valid
    // ################################

    function checkIfValid(string){
      return true;
    }

  </script>

</body>

</html>
